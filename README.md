# Magic: The Gathering Card Generator
Generate custom MTG cards with Pydantic-validated structured output and AI-generated artwork.

## Some Requirements
To try out this MTG card generator, you'll need at the very least an OpenAI API key, since images are generated with OpenAI models via OpenAI's API. The default LLM for generating the card specifications (e.g., mana cost, power, toughness) is `gpt-4.1-nano-2025-04-14`, and if you want to use that LLM then that's another reason you'll also need that OpenAI API key. If you want to try some of the LLMs outside of OpenAI like Llama or Grok-4, you'll need an OpenRouter API key in addition to the OpenAI API key, since interactions with these other LLM models are routed through OpenRouter. The Python code assumes that OpenAI API key and the OpenRouter API key are stored in a local `.env` file.

After setting up your `OPENAI_API_KEY` as described above, click on the **Generate Card** button, perhaps with the default prompt `Please generate a new MTG card.` If all goes well, the new card's information should appear in the text box in the upper right of the app. And an A.I.-generated image should appear to the left of the card's information. Any errors should appear in a pink box that appears below the text box for the prompt.

To see this app in action, visit the deployment on Hugging Face Spaces: [Magic: The Gathering Card Generator](https://huggingface.co/spaces/kestrel256/mtg-ai-card-generator)

## Some History
In [his very nice Udemy course on Agentic A.I.](https://www.udemy.com/course/the-complete-agentic-ai-engineering-course), [Ed Donner](https://www.linkedin.com/in/eddonner/) covered how to get structured output when working with LLMs, and I got to thinking that this could be used to help generate novel **Magic: The Gathering** (MTG) cards. So I developed code to do just that. Ed D. also taught us about Gradio and I noticed that Gradio makes it very easy to deploy to Hugging Face Spaces. So I used ChatGPT to build a Gradio app running my Python code under the hood; I suppose we might call what I did "vibe coding". Unfortunately, I discovered that Gradio seemed to be incompatible with the structured output as implemented in Pydantic. So, I used ChatGPT to translate the Gradio app to a Streamlit app, and to assist me with deploying to Hugging Face Spaces using Docker rather than Gradio to host my Space. The result is this **Magic: The Gathering Card Generator**.

I have extended this project to generate *sets* of MTG cards with interesting interactions.]
See the [MTG AI Card Set Generator](https://github.com/maisogjm/mtg-ai-card-set-generator).
(Hugging Face Spaces deployment: [MTG AI Card Set Generator](https://huggingface.co/spaces/kestrel256/mtg-ai-card-set-generator))

## Card Information
Card specifications such as the type of card (e.g., *Enchantment* or *Land*), mana cost, power, toughness, etc. are generated by an LLM; let's call this the **Card Generation Model**. I started off working with OpenAI's API since that is the API that I was most familiar with. Also, I had working example code for structured output from Ed D.'s course, and it used OpenAI's API. Initially, I tried fine-tuning the `gpt-4.1-nano-2025-04-14` model on MTG card information downloaded from [MTGJSON](https://mtgjson.com/). But then I discovered that I can't give other people access to the resulting fine-tuned model unless they become a part of my "organization". That would mean that the deployed MTG card generator would be broken — well, at least for everybody except me — since it wouldn't be able to access the tuned LLM. Anyway, I found that non-tuned models actually perform decently; so I have decided to just use a non-tuned model as the default. One thing with the non-tuned `gpt-4.1-nano-2025-04-14` model was that it has a tendency to give Lands a mana cost, and Lands typically don't cost mana to put into play; to address this problem, I inserted a note in the prompt that Lands typically don't cost mana to put into play. It feels kludgy, but hey, it works.

The generated card specifications seem to always generate flavor text, and not all MTG cards have flavor text. Even the fine-tuned model seemed to always generate flavor text. Although it might be possible to tweak the code (perhaps by manipulating the prompt?) so that flavor text is sometimes not generated, I have decided to retain the "always on" flavor text because I actually like it. I find that the flavor text is often the most fascinating and delicious part of the generated card information!

I thought it would be good to avoid creating a new card that had the same name as an pre-existing card. To do this, after generating a new MTG card, I check whether the name has already been used, and if so I simply generate an entirely new card, and keep generating new cards until one is generated with a name that has not been used. (I suppose that an alternative might have been to ask the LLM to just re-name the card, but otherwise keep the card's specifications unchanged.) 

But suppose the user explicitly asks for a card with a name that has already been used, before the LLM is ever invoked? E.g., the user might ask something like


    Please generate an MTG card named 'Llanowar Elves'.


and `Llanowar Elves` is an MTG card that already exists. To intercept such a prompt, I included a check for a request specifying the name of the card, and if so to extract the name of the card from the request. This extraction was done using structured output again, where one of the items in the structured output was the requested name. I then compare the extractedname against a list of all MTG cards (as of 11/7/2025, according to information downloaded from [MTGJSON](https://mtgjson.com/)). If the name is found in that list, then the code will not proceed to generate a new card, and will tell the user to either specify some other name or leave the name unspecified. Extraction of the name of the card is performed by an **Name Extraction Model**, an LLM which doesn't have to be the same as the **Card Generation Model**.

Once I got the structured output working with the non-tuned `gpt-4.1-nano-2025-04-14` model, I thought that maybe it would be good to allow the user to try other models. So, at the bottom of the app you'll see a section entitled **Settings**, and there you'll be able to select among different models. There's also a slider bar that allows you to control the temperature of the **Card Generation Model**.

In Week 4 of [his (again very nice) Udemy course on LLM engineering](https://www.udemy.com/course/llm-engineering-master-ai-and-large-language-models), Ed D. demo'd a Gradio app that allows the user to select between various LLM models, and to use the selected model to translate Python code to C++ code. I used that Gradio app as inspiration to allow the user to select between models to generate the card specifications. One problem is that if I used the native API for each model, this would require the user to have an API key for each model; due to differences between native APIs (notably Claude), it might also require custom code for some models. Also, some native APIs might not have structured output implemented yet, because it seems to be a relatively new feature; in OpenAI's API, structured output is apparently still in beta — a call is made to a function named **client.beta.chat.completions.parse()**. A very neat solution to this problem is to use [OpenRouter](https://openrouter.ai/), which I learned about in Ed D.'s courses; OpenRouter makes structured output functionality available for many models outside of OpenAI via a unified API, *and* requires only one key (`OPENROUTER_API_KEY`). With some experimentation, I found Grok, DeepSeek, Llama, and Qwen models that could handle structured output via OpenRouter. Unfortunately, I could not access any Claude, Gemini, and Mistral models via OpenRouter that could handle structured output; when I tried any of those models, I would get errors.

I have noticed that the `gpt-4.1-nano-2025-04-14` model has a strong tendency to set the **Subtype** field to `Legendary`. For this reason, I have set the default model to `gpt-4o-mini`. All of the other models other than `gpt-4.1-nano-2025-04-14` seem to allow for non-Legendary cards; give them a try. But sure, if you really want to generate a Legendary card, try the `gpt-4.1-nano-2025-04-14` model.

OpenAI has recently released `gpt-5.1` in their API. In a local installation of this app, I have been getting very good results using `gpt-5.1` as the **Card Generation Model**, coupled with `gpt-image-1` as the **Image Generation Model**.

I have set the default temperature of the **Card Generation Model** to 0.8, but you can try playing with that to see what happens to the generated card specifications. At a temperature of 0, I found that the `gpt-4.1-nano-2025-04-14` model seemed to insist on always generating a white flying creature named `Eternal Sentinel`. At the other extreme, at a temperature of 1.9, I started seeing strange Unicode characters, non-sensical words, and gibberish sentences in the text and flavor text. And then at a temperature of 2.0, I even got an outright error about the output being too long, as if the LLM never got around to generating some sort indication of End-Of-Line or End-Of-File.

## A.I. Image
I stuck with generating images using OpenAI's API and models. I found that the `dall-e-3` image generator performed fine, except that occasionally it would insert garbled text into the image output. I think this is because photos of actual MTG cards, text and all, and possibly scanned pages of books like Dungeons & Dragons' **Monster Manual** and the **Player's Handbook**, were included in the training data. I tried inserting negative prompts such as "Do not insert text into the image" into the prompt, but `dall-e-3` still occasionally inserted garbled text into images. Here is an example of an artifact that `dall-e-3` inserted into the generated image:

<p align="center">
  <img src="Eldritch Guardian.jpg" width="512" alt="Eldritch Guardian">
</p>

I found that `gpt-image-1` adheres to negative prompts much more consistently. Thus far `gpt-image-1` has inserted text into the generated image only twice for me. In one case, the text was not gibberish — it was actually the flavor text! Here is that first case:
<p align="center">
  <img src="Lord Voldemort, He Who Must Not Be Named.jpg" width="512" alt="Lord Voldemort, He Who Must Not Be Named">
</p>

And here is the second case where `gpt-image-1` inserted text into the image:
<p align="center">
  <img src="The Phantom Tollbooth.jpg" width="512" alt="The Phantom Tollbooth">
</p>

Overall, `gpt-image-1` inserted text into images much less frequently than `dall-e-3` did. I also found that `gpt-image-1` generated images that very much resembled classic depictions of characters in popular culture, whereas `dalle-e-3` often diverged from those well-known renderings.

Give `dall-e-3` a try, and if you think the occasional garbled text in the generated image is really too much to bear, or if you are dissatisified by how it renders well-known characters from popular imagination, clone this repository and in your own copy try switching to `gpt-image-1`. Note that `gpt-image-1` requires you to [verify your organization with OpenAI](https://help.openai.com/en/articles/10910291-api-organization-verification); the process of doing so seemed a bit glitchy, but I persisted and after something like 48-72 hours I got my "Personal" organization verified, and then `gpt-image-1` started to work for me.

For this publicly hosted version of the **Magic: The Gathering Card Generator**, I've exposed only the `dall-e-3` image generator.


## Suggestions
Try some of the following prompts.

- Please generate a new MTG card. Make it a Land.
- Please generate a new MTG card. Make it a blue enchantment.
- Please generate a new MTG card. Make it a colorless artifact creature.
- Please generate a new MTG card. Make it an flying creature with power 2.
- Please generate a new MTG card. Make it an creature costing one mana of each color.
- Please generate a new MTG card. Make it a giant kaiju with two heads, wings, and atomic breath.
- Please generate a new MTG card. Make it a super-hero themed creature, complete with flying, energy bolt super-powers, and a spandex super-hero costume like in the comic books.
- Please generate a new MTG card with a name borrowed from mathematics or computer science terms. Something geeky.
- Please generate a new MTG card named 'Flanking Maneuver'.
- Please generate a new MTG card named Knit One, Purl One.
- Please generate a new MTG card named 'Measure Twice, Cut Once'.
- Please generate a new MTG card named 'A Stitch in Time Saves Nine'.
- Please generate a new MTG card named 'Bite the Bullet'.
- Please generate a new MTG card named 'Saved By The Bell'.
- Please generate a new MTG card named 'Neutral Zone Infraction'.
- Please generate a new MTG card named 'Hidden Ball Trick'.
- Please generate a new MTG card named 'Unnecessary Roughness'.
- Please generate a new MTG card named 'Balk', based on the baseball term.
- Please generate a new MTG card named 'Checkmate'.
- Please generate a new MTG card named Late For Work.
- Please generate a new MTG card named 'Chain of Thought'.
- Please generate a new MTG card named Shaolin Monk.
- Please generate a new MTG card named Glass Jaw.
- Please generate a new MTG card named 'Mad Scientist'.
- Please generate a new MTG card named 'Lucid Dreaming'.
- Please generate a new MTG card named 'Subliminal Message'.
- Please generate a new MTG card named 'Sine Qua Non'.
- Please generate a new MTG card named 'Deus Ex Machina'.
- Please generate a new MTG card named 'Anachronism'.
- Please generate a new MTG card named 'MacGuffin'.
- Please generate a new MTG card named 'Mary Sue', a type of fictional character.
- Please generate a new MTG card named 'Eminent Domain'.
- Please generate a new MTG card named 'Kludge'.
- Please generate a new MTG card named 'Segmentation Fault'.
- Please generate a new MTG card named 'Code Injection'.
- Please generate a new MTG card named 'Zero-Day Exploit'.
- Please generate a new MTG card named 'Memory Overflow'.
- Please generate a new MTG card named 'Syntax Error'.
- Please generate a new MTG card named 'Index Out of Bounds Error'.
- Please generate a new MTG card named 'Infinite Loop'.
- Please generate a new MTG card named 'Recursive Reference Error'.
- Please generate a new MTG card named 'Divide By Zero Error'.
- Please generate a new MTG card named 'Compilation Error', based on the software development term.
- Please generate a new MTG card named 'Linking Error', based on the software development term.
- Please generate a new MTG card named 'Runtime Error', based on the software development term.
- Please generate a new MTG card named 'File Not Found Error'.
- Please generate a new MTG card named 'Corrupted Partition'.
- Please generate a new MTG card named 'Stack Trace'.
- Please generate a new MTG card named 'Binary Search'.
- Please generate a new MTG card named 'Naming Collision'.
- Please generate a new MTG card named 'Multiple Imputation'.
- Please generate a new MTG card named 'Null Hypothesis'.
- Please generate a new MTG card named 'Permutation Test', based on the statistical method.
- Please generate a new MTG card. Make it an artifact named 'Support Vector Machine'.
- Please generate a new MTG card. Make it a green card named 'Random Forest'.
- Please generate a new MTG card named 'Cross-Validation', based on the machine learning technique.
- Please generate a new MTG card named 'Dimensionality Reduction'.
- Please generate a new MTG card named 'Proof By Induction'.
- Please generate a new MTG card named 'Proof By Contradiction'.
- Please generate a new MTG card named 'Process of Elimination'.
- Please generate a new MTG card named 'Fever of Unknown Origin', based on the medical term.
- Please generate a new MTG card named 'Occult Bleeding', based on the medical term.
- Please generate a new MTG card named 'Phantom Limb', based on the medical term.
- Please generate a new MTG card named 'Aphantasia', based on the medical term.
- Please generate a new MTG card named 'Septic Shock', based on the medical term.
- Please generate a new MTG card named 'Psychosomatic Symptoms', based on the medical term.
- Please generate a new MTG card named 'Heart Transplant', based on the medical term.
- Please generate a new MTG card named 'Respiratory Failure', based on the medical term.
- Please generate a new MTG card named 'Filariasis', based on the medical term.
- Please generate a new MTG card named 'Bone Fracture', based on the medical term.
- Please generate a new MTG card named 'Syncope', based on the medical term.
- Please generate a new MTG card named 'Dyspnea', based on the medical term.
- Please generate a new MTG card named 'Hemolytic Anemia', based on the medical term.
- Please generate a new MTG card named 'Autoimmune Disease', based on the medical term.
- Please generate a new MTG card named 'Paradoxical Breathing', based on the medical term.
- Please generate a new MTG card named 'Right-Sided Neglect', based on the medical term.
- Please generate a new MTG card named 'Blood Transfusion', based on the medical term.
- Please generate a new MTG card named 'Anaphylaxis', based on the medical term.
- Please generate a new MTG card named 'Cachexia', based on the medical term.
- Please generate a new MTG card named 'Blood-Brain Barrier', based on the medical term.
- Please generate a new MTG card named 'Nosocomial Infection', based on the medical term.
- Please generate a new MTG card named 'Iatrogenic Illness', based on the medical term.
- Please generate a new MTG card named 'Sentinel Node', based on the medical term.
- Please generate a new MTG card named 'Apoptosis', based on the medical term.
- Please generate a new MTG card named 'Perseveration', based on the psychiatric term.
- Please generate a new MTG card named 'Differential Diagnosis', based on the medical term.
- Please generate a new MTG card named 'Song and Dance'.
- Please generate a new MTG card named 'Subduction Zone'.
- Please generate a new MTG card named 'Aurora Borealis'.
- Please generate a new MTG card named 'Northern Lights'.
- Please generate a new MTG card named 'Atomic Pile'.
- Please generate a new MTG card named 'Lightning in a Bottle'.
- Please generate a new MTG card named 'Greased Lightning'.
- Please generate a new MTG card named 'Liminal Space'.
- Please generate a new MTG card named 'The Backrooms'.
- Please generate a new MTG card named 'Fortean Phenomena'.
- Please generate a new MTG card named 'The Rubicon'.
- Please generate a new MTG card named 'Fiddler's Green'.
- Please generate a new MTG card named 'Shangri-La'.
- Please generate a new MTG card named 'Xanadu'.
- Please generate a new MTG card named 'Ultima Thule'.
- Please generate a new MTG card named 'Hyperborea'.
- Please generate a new MTG card named 'Utopia'.
- Please generate a new MTG card named 'Pellucidar'.
- Please generate a new MTG card named 'The Land That Time Forgot'.
- Please generate a new MTG card named 'El Dorado'.
- Please generate a new MTG card named 'Safe Harbor'.
- Please generate a new MTG card named 'Treasure Island'.
- Please generate a new MTG card named 'Elysium'.
- Please generate a new MTG card named 'Arcadia'.
- Please generate a new MTG card named 'Sheol'.
- Please generate a new MTG card named 'Bermuda Triangle'.
- Please generate a new MTG card. Make it a land named "Faerie".
- Please generate a new MTG card named Widdershins.
- Please generate a new MTG card named Raggamuffin.
- Please generate a new MTG card named 'Rigmarole'.
- Please generate a new MTG card named 'Imbroglio'.
- Please generate a new MTG card named 'Hierophant of the Eleusinian Mysteries'.
- Please generate a new MTG card named 'El Cid Campeador'.
- Please generate a new MTG card named 'Excalibur'.
- Please generate a new MTG card named 'Nosferatu'.
- Please generate a new MTG card named 'Beowulf'.
- Please generate a new MTG card named 'Grendel'.
- Please generate a new MTG card named 'Beast of Gévaudan'.
- Please generate a new MTG card named "Bigfoot".
- Please generate a new MTG card named "Skunk Ape".
- Please generate a new MTG card named "Loch Ness Monster".
- Please generate a new MTG card named "Lake Champlain Monster".
- Please generate a new MTG card named "Flatwoods Monster".
- Please generate a new MTG card named "Abominable Snowman".
- Please generate a new MTG card named "Mokele-mbembe".
- Please generate a new MTG card named 'Mothman', based on the cryptid reported in Point Pleasant, West Virginia.
- Please generate a new MTG card named 'Dover Demon', based on the cryptid reported in Dover, Massachusetts.
- Please generate a new MTG card named "Jersey Devil".
- Please generate a new MTG card named 'Mongolian Death Worm'.
- Please generate a new MTG card named 'Tatzelwurm'.
- Please generate a new MTG card named 'Chupacabra'.
- Please generate a new MTG card named 'Tullimonstrum, the Tully Monster'.
- Please generate a new MTG card named 'Anomalocaris', based on the Cambrian-era creature.
- Please generate a new MTG card named 'Snollygoster'.
- Please generate a new MTG card named 'Tarrasque', based on the creature from Dungeons & Dragons.
- Please generate a new MTG card named 'Deck of Many Things', based on the magic item in Dungeons & Dragons.
- Please generate a new MTG card named 'Mace of Cuthbert', based on the magic item in Dungeons & Dragons.
- Please generate a new MTG card. Make it an artifact named "Witch's Broom".
- Please generate a new MTG card. Make it an artifact named "King Solomon's Ring".
- Please generate a new MTG card named 'Winged Bull of Nineveh'.
- Please generate a new MTG card named 'Ozymandias'.
- Please generate a new MTG card. Make it a Lovecraftian creature.
- Please generate a new MTG card named 'Hounds of Tindalos'.
- Please generate a new MTG card named 'Shoggoth'.
- Please generate a new MTG card named 'Dhole'.
- Please generate a new MTG card, based on the ideas and writings of science fiction author Philip K. Dick.
- Please generate a new MTG card named "Upon the Dull Earth", based on the short story of the same name, by Philip K. Dick.
- Please generate a new MTG card named 'Replicant', based on the synthetic people in the movie "Blade Runner" (which in turn was based on the novel "Do Androids Dream of Electric Sheep", by Philip K. Dick).
- Please generate a new MTG card named 'Rahab', based on the Old Testament creature.
- Please generate a new MTG card named Juggernaut, based on the super-villain (sometimes hero) in Marvel Comics.
- Please generate a new MTG card named Saruman of the Many Colors, based on the writings of Tolkien.
- Please generate a new MTG card named "Arien", based on the character in J.R.R. Tolkien's "The Silmarillion".
- Please generate a new MTG card named 'Morpheus, the Sandman', based on the character developed by Neil Gaiman.
- Please generate a new MTG card named "Grizzabella the Glamour Cat".
- Please generate a new MTG card named "We Will Rock You/We Are The Champions".
- Please generate a new MTG card named 'Puff, the Magic Dragon'.
- Please generate a new MTG card named "Honalee", a land mentioned in the song "Puff, the Magic Dragon".
- Please generate a new MTG card named 'Peter Pan'.
- Please generate a new MTG card named 'Neverland'.
- Please generate a new MTG card named 'The Terrible Dogfish'.
- Please generate a new MTG card named 'Snidely Whiplash'.
- Please generate a new MTG card named 'Freddy Krueger'.
- Please generate a new MTG card named 'Michael Myers', based on the character from the movie "Halloween".
- Please generate a new MTG card named 'Predator', based on the alien from the Schwarzenegger movie "Predator".
- Please generate a new MTG card named 'Xenomorph'.
- Please generate a new MTG card named 'Colonial Marines'.
- Please generate a new MTG card named 'Randall Flagg', based on the character developed by Stephen King.
- Please generate a new MTG card named 'The Jaunt', based on the short story by Stephen King.
- Please generate a new MTG card named 'The Mangler', based on the short story by Stephen King.
- Please generate a new MTG card named "Crouch End", based on the short story of the same name by Stephen King.
- Please generate a new MTG card named "Lord Voldemort, He Who Must Not Be Named", based on the character developed by J.K. Rowling.
- Please generate a new MTG card named "Moomintroll".
- Please generate a new MTG card named "Winnie-the-Pooh".
- Please generate a new MTG card named "The Phantom Tollbooth".
- Please generate a new MTG card named 'Lord of the Flies'.
- Please generate a new MTG card named 'Catcher in the Rye'.
- Please generate a new MTG card named "Mr. Toad", based on the character from "The Wind in the Willows", by Kenneth Grahame.
- Please generate a new MTG card named "Paddington Bear".
- Please generate a new MTG card named "Babar the Elephant".
- Please generate a new MTG card named "The Cat in the Hat", based on the character developed by Dr. Seuss.
- Please generate a new MTG card named "The Grinch", based on the character developed by Dr. Seuss.
- Please generate a new MTG card named 'Land of the Lost'.
- Please generate a new MTG card named "Cha-Ka", based on the character from "Land of the Lost".
- Please generate a new MTG card named "Sleestak", based on the creatures from "Land of the Lost".
- Please generate a new MTG card named "Pylon", based on the artificial structures from "Land of the Lost".
- Please generate a new MTG card named 'Pagliacci'.
- Please generate a new MTG card named 'Totoro', based on the character from the movie My Neighbor Totoro.
- Please generate a new MTG card named 'Wicked Witch of the West', based on the character from the movie The Wizard of Oz.
- Please generate a new MTG card named 'Ruby Slippers', an artifact based on Dorothy's ruby slippers in the movie The Wizard of Oz.
- Please generate a new MTG card named 'Gregor Clegane', based on the character from Game of Thrones.
- Please generate a new MTG card named 'Salt Vampire', based on the creature from Star Trek: The Original Series.
- Please generate a new MTG card named 'Horta', based on the creature from Star Trek: The Original Series.
- Please generate a new MTG card named 'Tribbles', based on the creatures from Star Trek: The Original Series.
- Please generate a new MTG card named 'Harcourt Fenton "Harry" Mudd', based on the character from Star Trek.
- Please generate a new MTG card named 'Sarlacc', based on the creature from Star Wars.
- Please generate a new MTG card named 'Rancor (Star Wars)', based on the creature from Star Wars.
- Please generate a new MTG card named "The Hero's Journey", based on Joseph Campbell's monomyth. Make it an Legendary Enchantment of Subtype "Saga", that follows the phases of the hero's journey.
